{#
/**
 * @file
 * Theme override to display a menu.
 *
 * Available variables:
 * - menu_name: The machine name of the menu.
 * - items: A nested list of menu items. Each menu item contains:
 *   - attributes: HTML attributes for the menu item.
 *   - below: The menu item child items.
 *   - title: The menu link title.
 *   - url: The menu link url, instance of \Drupal\Core\Url
 *   - localized_options: Menu link localized options.
 *   - is_expanded: TRUE if the link has visible children within the current
 *     menu tree.
 *   - is_collapsed: TRUE if the link has children within the current menu tree
 *     that are not currently visible.
 *   - in_active_trail: TRUE if the link is in the active trail.
 */
#}
{% import _self as menus %}

{#
We call a macro which calls itself to render the full tree.
@see http://twig.sensiolabs.org/doc/tags/macro.html
#}
{{ menus.menu_links(items, attributes, 0) }}

{% macro menu_links(items, attributes, menu_level) %}
  {% import _self as menus %}
  {% if items %}
    <div class="container" id="element-menu">
      {% if menu_level == 0 %}
      <ul{{ attributes.addClass('menu row list-unstyled') }}>
        {% else %}
        {% if menu_level == 2 %}
        <ul class="menu pl-3">
          {% else %}
          <ul class="menu pl-0">
            {% endif %}

            {% endif %}
            {% for item in items %}
              {% set classes = [
                'menu-item',
                item.is_expanded ? 'menu-item--expanded',
                item.is_collapsed ? 'menu-item--collapsed',
                item.in_active_trail ? 'menu-item--active-trail',
              ] %}
              {% if menu_level == 0 %}
                <li class="col-6 col-sm-4 col-md-3 col-lg-3 pt-5">
                {% if item.title in ['E-learning', 'Médiathèque', 'Media library'] %}
                  <a href="{{ item.url }}" class="font-weight-bold highlited-link">{{ item.title }}</a>
                {% else %}
                  <a class="font-weight-bold">{{ item.title }}</a>
                {% endif %}
              {% else %}

                {% if item.title =='Contenu-a-propos-de-nous' %}
                <li{{ item.attributes.addClass(classes,'text-justify') }}>
                  <a>{{'ONG française, Agrisud intervient depuis 1992 en Afrique et dans l’Océan Indien, en Asie, en Amérique Latine et dans les Caraïbes.
                    Avec ses partenaires, elle lutte contre la précarité par le développement d’activités économiques durables.
                    Elle soutient des systèmes agricoles basés sur des exploitations familiales, valorisant les ressources locales,
                    protégeant la biodiversité et résilients face au dérèglement climatique. Elle met en place des projets pour
                    des territoires socialement équitables, économiquement viables et écologiquement responsables.' |trans}}</a>
                {% else %}
                <li{{ item.attributes.addClass(classes) }}>
                {{ link(item.title, item.url) }}
              {% endif %}
              {% endif %}
              {% if item.below %}
                {{ menus.menu_links(item.below, attributes, menu_level + 1) }}
              {% endif %}
              </li>
            {% endfor %}
          </ul>
    </div>
  {% endif %}
{% endmacro %}
